<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Nuestra Boda - Javier Espinosa Mejías & Maite Prieto Vellisco</title>
    <!-- Tailwind CSS CDN -->
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;700&family=Playfair+Display:wght@400;700&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Inter', sans-serif;
            background-color: #F5EFE6; /* Crema claro de la paleta */
            color: #5C4033; /* Marrón oscuro para el texto principal */
            line-height: 1.6;
        }
        h1, h2, h3 {
            font-family: 'Playfair Display', serif; /* Fuente más elegante para títulos */
            color: #A07C5B; /* Marrón cálido para los títulos */
        }
        .header-bg {
            background-image: url('uploaded:image_3c7860.jpg-9e710085-2154-4b15-bfeb-4481692d0691'); /* Imagen de la boda proporcionada por el usuario */
            background-size: cover;
            background-position: center;
            position: relative;
            min-height: 80vh; /* Altura mínima para la cabecera */
            display: flex;
            align-items: center;
            justify-content: center;
            text-align: center;
            color: white;
            box-shadow: 0 8px 16px rgba(0, 0, 0, 0.2);
        }
        .header-overlay {
            background: linear-gradient(rgba(0,0,0,0.5), rgba(0,0,0,0.2));
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            padding: 2rem;
            gap: 1rem; /* Espacio entre los elementos del header */
        }
        .text-shadow-lg {
            text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.7); /* Sombra para el texto del header */
        }
        .section-title {
            font-weight: 700;
            margin-bottom: 2.5rem;
            font-size: 2.8rem; /* Tamaño de fuente más grande para títulos de sección */
            position: relative;
            padding-bottom: 0.5rem;
        }
        .section-title::after {
            content: '';
            position: absolute;
            left: 50%;
            bottom: 0;
            transform: translateX(-50%);
            width: 80px;
            height: 3px;
            background-color: #A07C5B; /* Línea decorativa del color de título */
            border-radius: 5px;
        }
        .button-primary {
            background-color: #A07C5B; /* Marrón cálido de la paleta */
            color: white;
            padding: 0.9rem 2.2rem;
            border-radius: 9999px; /* Botones redondeados */
            transition: all 0.3s ease;
            font-weight: 600;
            letter-spacing: 0.05em;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
        }
        .button-primary:hover {
            background-color: #8B6244; /* Tono más oscuro del marrón para hover */
            transform: translateY(-2px);
            box-shadow: 0 6px 12px rgba(0, 0, 0, 0.3);
        }
        .card {
            background-color: white; /* Fondo blanco para las tarjetas */
            border-radius: 1.5rem; /* Más redondeado */
            padding: 2rem;
            box-shadow: 0 10px 20px rgba(0, 0, 0, 0.1); /* Sombra más pronunciada */
            transition: transform 0.3s ease;
            border: 1px solid #E0D9CC; /* Borde sutil en tono beige claro */
        }
        .card:hover {
            transform: translateY(-5px);
        }
        .message-box {
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background-color: #333;
            color: white;
            padding: 15px 25px;
            border-radius: 8px;
            z-index: 1000;
            display: none; /* Hidden by default */
            font-size: 1.1rem;
            box-shadow: 0 4px 8px rgba(0,0,0,0.2);
            text-align: center;
        }
        .countdown-item {
            display: inline-block;
            margin: 0 1rem;
            font-size: 2.5rem;
            font-weight: 700;
            color: white; /* Color blanco para los números de la cuenta atrás */
        }
        .countdown-item span {
            display: block;
            font-size: 0.9rem;
            font-weight: 400;
            color: white; /* Color blanco para las etiquetas de la cuenta atrás */
            margin-top: 0.2rem;
        }
        .google-form-iframe {
            width: 100%;
            height: 600px; /* Ajusta la altura según sea necesario */
            border: none;
            border-radius: 0.75rem;
            box-shadow: 0 4px 8px rgba(0,0,0,0.1);
        }
        .section-image-container {
            width: 100%;
            height: 280px; /* Altura fija para el contenedor de la imagen */
            overflow: hidden;
            border-radius: 1rem;
            box-shadow: 0 8px 16px rgba(0, 0, 0, 0.15);
            margin-bottom: 1.5rem; /* Espacio debajo de la imagen */
        }
        .section-image {
            width: 100%;
            height: 100%;
            object-fit: cover; /* Asegura que la imagen cubra el área sin distorsionarse */
            transition: transform 0.3s ease-in-out;
        }
        .section-image-container:hover .section-image {
            transform: scale(1.05); /* Ligeramente más grande en hover */
        }
        .image-grid-story {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr)); /* Responsivo para 1 o 2 columnas */
            gap: 1.5rem; /* Espacio entre las imágenes */
            margin-bottom: 1.5rem;
        }

        @media (max-width: 640px) {
            .section-title {
                font-size: 2.2rem;
            }
            .countdown-item {
                font-size: 1.8rem;
                margin: 0 0.5rem;
            }
            .countdown-item span {
                font-size: 0.7rem;
            }
            .header-overlay {
                gap: 0.5rem; /* Menos espacio en móviles */
            }
            .header-overlay h1 {
                font-size: 3.5rem; /* Ajuste para móviles */
            }
            .header-overlay p {
                font-size: 1.5rem; /* Ajuste para móviles */
            }
            .image-grid-story {
                grid-template-columns: 1fr; /* Una columna en móviles */
            }
        }
    </style>
</head>
<body>

    <!-- Sección de Cabecera -->
    <header class="header-bg">
        <div class="header-overlay">
            <h1 class="text-5xl sm:text-6xl md:text-7xl font-bold text-shadow-lg">
                Javier & Maite
            </h1>
            <p class="text-2xl sm:text-3xl md:text-4xl font-light text-shadow-lg">
                ¡Nos casamos!
            </p>
            <p class="text-xl sm:text-2xl md:text-3xl font-semibold text-shadow-lg">
                7 de noviembre de 2025
            </p>
            <div id="countdown" class="mt-8 flex justify-center mb-10">
                <div class="countdown-item">
                    <span id="days" class="text-shadow-lg">00</span>
                    <span>Días</span>
                </div>
                <div class="countdown-item">
                    <span id="hours" class="text-shadow-lg">00</span>
                    <span>Horas</span>
                </div>
                <div class="countdown-item">
                    <span id="minutes" class="text-shadow-lg">00</span>
                    <span>Minutos</span>
                </div>
                <div class="countdown-item">
                    <span id="seconds" class="text-shadow-lg">00</span>
                    <span>Segundos</span>
                </div>
            </div>
        </div>
    </header>

    <main class="container mx-auto px-4 py-12 sm:py-16 max-w-screen-lg">

        <!-- Sección de Nuestra Historia -->
        <section id="nuestra-historia" class="text-center mb-16 sm:mb-20">
            <h2 class="section-title text-center">Nuestra Historia</h2>
            <div class="card max-w-3xl mx-auto p-6 sm:p-8">
                <p class="text-lg sm:text-xl leading-relaxed mb-6">
                    Nuestra historia comenzó en [Año o Lugar], con un encuentro que cambiaría nuestras vidas para siempre. Desde ese día, cada momento ha sido una aventura, llena de risas, apoyo mutuo y un amor que crece día a día.
                </p>
                <div class="image-grid-story">
                    <div class="section-image-container">
                        <img src="3a4675a4-7aed-457f-b42b-13c2cd49407d.jpeg" class="section-image">
                    </div>
                    <div class="section-image-container">
                        <img src="994c6f6b-154b-4191-b03b-28f48fb14521.jpeg" class="section-image">
                    </div>
                </div>
                <p class="text-lg sm:text-xl leading-relaxed">
                    Hemos compartido [menciona un par de hitos, ej: viajes inolvidables, desafíos superados, sueños compartidos] y estamos emocionados de comenzar este nuevo capítulo como marido y mujer. ¡Gracias por ser parte de nuestro viaje!
                </p>
            </div>
        </section>

        <!-- Sección de Detalles del Evento con fondo de imagen -->
        <section id="detalles" class="details-bg mb-16 sm:mb-20 text-center">
            <div class="details-overlay"></div>
            <div class="details-content">
                <h2 class="section-title text-center text-gray-800">Detalles del Evento</h2>
                <div class="card max-w-xl mx-auto p-6 sm:p-8">
                    <h3 class="text-2xl font-semibold mb-4 text-gray-800">Ceremonia y Recepción</h3>
                    <p class="text-lg mb-2"><strong>Fecha:</strong> 07-11-2025 </p>
                    <p class="text-lg mb-2"><strong>Hora:</strong> 19:00h </p>
                    <p class="text-lg mb-4"><strong>Lugar:</strong> Finca la Ribera </p>
                    <p class="text-md text-gray-600 mb-4">Finca La Ribera 2, Aranjuez, Madrid</p>
                    <a href="https://maps.google.com/?q=Finca%20La%20Ribera%202,%20Aranjuez,%20Madrid" target="_blank" class="text-blue-600 hover:underline inline-block mt-2">Ver en el mapa</a>
                    <div class="section-image-container mt-6">
                        <img src="patio.jpg">
                    </div>
                </div>
            </div>
        </section>

        <!-- Sección de Contribución de Luna de Miel con Google Forms -->
        <section id="honeymoon-contribution-section" class="text-center mb-16 sm:mb-20">
            <h2 class="section-title text-center">Javier y Maite</h2>
            <div class="card max-w-3xl mx-auto p-6 sm:p-8 text-left">
                <p class="text-lg sm:text-xl leading-relaxed mb-4">
                    Si deseas contribuir a nuestra luna de miel, por favor, rellena el siguiente formulario para informarnos de tu contribución y déjanos un mensaje.
                </p>
                <!-- Google Forms Embed -->
                <iframe class="google-form-iframe" src="https://forms.gle/Pu4VyqhL1un6hbfF8" frameborder="0" marginheight="0" marginwidth="0">Cargando…</iframe>
                <p class="text-md text-gray-600 mt-4">
                    *(Este formulario solo recopila información, no procesa pagos.)*
                </p>

                <div class="mt-8 pt-4 border-t border-gray-200">
                    <p class="text-lg sm:text-xl leading-relaxed mb-4">
                        <strong>Después de rellenar el formulario, por favor, realiza la transferencia bancaria a:</strong>
                    </p>
                    <p class="text-lg mb-2"><strong>IBAN:</strong> ES0400495177652016335582</p>
                    <p class="text-lg mb-2"><strong>Titular:</strong> Javier & Maite</p>
                    <p class="text-lg mb-4"><strong>Concepto:</strong> Tu nombre completo</p>
                    <div class="section-image-container mt-6">
                        <img src="uploaded:c0f41242-610a-403a-8ae6-c7584b6df232.jpg-487aa524-5b58-4c27-94e4-0d7d02d1f311" alt="Javier y Maite abrazados de noche" class="section-image">
                    </div>
                </div>
                <p id="user-id-display" class="text-sm text-gray-500 mt-10">Tu ID de usuario: Cargando...</p>
            </div>
        </section>

    </main>

    <!-- Caja de Mensajes Personalizada -->
    <div id="message-box" class="message-box"></div>

    <!-- Pie de Página -->
    <footer class="bg-gray-800 text-white text-center py-8 rounded-t-lg">
        <p class="text-sm sm:text-base">&copy; 2025 Javier Espinosa Mejías & Maite Prieto Vellisco. Todos los derechos reservados.</p>
        <p class="text-sm sm:text-base mt-2">¡Gracias por ser parte de nuestra historia!</p>
        <p class="text-xs mt-4">Diseñado con amor para Javier y Maite.</p>
    </footer>

    <!-- Firebase SDKs -->
    <script type="module">
        import { initializeApp } from "https://www.gstatic.com/firebasejs/11.6.1/firebase-app.js";
        import { getAuth, signInAnonymously, signInWithCustomToken, onAuthStateChanged } from "https://www.gstatic.com/firebasejs/11.6.1/firebase-auth.js";
        import { getFirestore, doc, getDoc, setDoc, onSnapshot } from "https://www.gstatic.com/firebasejs/11.6.1/firebase-firestore.js";

        // Global variables for Firebase config and app ID
        const appId = typeof __app_id !== 'undefined' ? __app_id : 'default-app-id';
        const firebaseConfig = typeof __firebase_config !== 'undefined' ? JSON.parse(__firebase_config) : {};
        
        let initialAuthToken = null;
        if (typeof __initial_auth_token !== 'undefined') {
            initialAuthToken = __initial_auth_token;
        }

        let app;
        let db;
        let auth;
        let userId = null;

        // Function to show a custom message box
        function showMessageBox(message) {
            const msgBox = document.getElementById('message-box');
            msgBox.textContent = message;
            msgBox.style.display = 'block';
            setTimeout(() => {
                msgBox.style.display = 'none';
            }, 3000); // Hide after 3 seconds
        }

        window.onload = async function() {
            try {
                // Initialize Firebase
                app = initializeApp(firebaseConfig);
                db = getFirestore(app);
                auth = getAuth(app);

                // Authenticate user
                if (initialAuthToken) {
                    await signInWithCustomToken(auth, initialAuthToken);
                } else {
                    await signInAnonymously(auth);
                }

                // Listen for auth state changes to get user ID
                onAuthStateChanged(auth, (user) => {
                    if (user) {
                        userId = user.uid;
                        // Ensure the element exists before trying to set textContent
                        const userIdDisplay = document.getElementById('user-id-display');
                        if (userIdDisplay) {
                            userIdDisplay.textContent = `Tu ID de usuario: ${userId}`;
                        }
                    } else {
                        // If for some reason auth fails, generate a random ID
                        userId = crypto.randomUUID();
                        const userIdDisplay = document.getElementById('user-id-display');
                        if (userIdDisplay) {
                            userIdDisplay.textContent = `Tu ID de usuario: ${userId} (Anónimo)`;
                        }
                    }
                });

            } catch (error) {
                console.error("Error initializing Firebase or authenticating:", error);
                const userIdDisplay = document.getElementById('user-id-display');
                if (userIdDisplay) {
                    userIdDisplay.textContent = `Error al cargar ID de usuario.`;
                }
                showMessageBox("Error al cargar la aplicación. Por favor, inténtalo de nuevo.");
            }

            // Initialize and start countdown
            updateCountdown();
            setInterval(updateCountdown, 1000);
        };

        // Countdown Timer Functionality
        function updateCountdown() {
            // Set your wedding date here (Year, Month (0-11), Day, Hour, Minute, Second)
            const weddingDate = new Date("2025-11-07T19:00:00").getTime(); // 7 de noviembre de 2025 a las 19:00h

            const now = new Date().getTime();
            const distance = weddingDate - now;

            const days = Math.floor(distance / (1000 * 60 * 60 * 24));
            const hours = Math.floor((distance % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));
            const minutes = Math.floor((distance % (1000 * 60 * 60)) / (1000 * 60));
            const seconds = Math.floor((distance % (1000 * 60)) / 1000);

            document.getElementById("days").textContent = days < 10 ? '0' + days : days;
            document.getElementById("hours").textContent = hours < 10 ? '0' + hours : hours;
            document.getElementById("minutes").textContent = minutes < 10 ? '0' + minutes : minutes;
            document.getElementById("seconds").textContent = seconds < 10 ? '0' + seconds : seconds;

            if (distance < 0) {
                clearInterval(this); // Stop the countdown
                document.getElementById("countdown").innerHTML = "<p class='text-2xl font-bold text-white'>¡Ya nos hemos casado!</p>";
            }
        }
    </script>
</body>
</html>
